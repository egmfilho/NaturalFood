/*
* @Author: egmfilho &lt;egmfilho@live.com&gt; 
* @Date: 2017-12-14 17:29:55 
 * @Last Modified by: egmfilho
 * @Last Modified time: 2017-12-15 12:57:12
*/

import { Person } from "./person.model";
import { Plan } from "./plan.model";

export class User {
	
	public id: number;
	public personId: number;
	public planId: number;
	public name: string;
	public email: string;
	public password: string;
	public imageUrl: string;
	public imageData: string;
	public person: Person;
	public plan: Plan;

	constructor(user: any) {
		if (!(user instanceof User)) {
			user = User.convertFromPost(user);
		}

		this.id = user.id;
		this.personId = user.personId;
		this.planId = user.planId;
		this.name = user.name;
		this.email = user.email;
		this.imageUrl = user.imageUrl;
		this.imageData = user.imageData;
		this.person = new Person(user.person);
		this.plan = new Plan(user.plan);
	}

	public static convertFromPost(user: any) {
		if (!user) user = { };
		
		return {
			id: user.user_id,
			personId: user.person_id,
			planId: user.plan_id,
			name: user.user_name,
			email: user.user_mail,
			imageUrl: user.image ? user.image.image_uri + 'small.jpg' : null,
			imageData: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNEQ3MDU2NUYyMjgxMUU3ODAxMkFGMDhBRUY1MzNGQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNEQ3MDU2NkYyMjgxMUU3ODAxMkFGMDhBRUY1MzNGQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU0RDcwNTYzRjIyODExRTc4MDEyQUYwOEFFRjUzM0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU0RDcwNTY0RjIyODExRTc4MDEyQUYwOEFFRjUzM0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XknFNgAAC2VJREFUeNrMW2ls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',
			person: user.person,
			plan: user.plan
		}
	}

	convertToPost() {
		return {
			user_id: this.id,
			person_id: this.personId,
			plan_id: this.planId,
			user_name: this.name,
			user_mail: this.email,
			user_pass: this.password
		}
	}
}